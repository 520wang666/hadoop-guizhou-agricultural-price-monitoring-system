# 项目目录结构规划

## 1. 项目整体结构

```
hadoop-guizhou-agricultural-price-monitoring-system/
├── doc/                          # 项目文档
│   ├── 开题报告基于Hadoop的贵州农产品价格监测分析系统的设计与实现.docx
│   └── 农产品价格监测Hadoop代码指南.docx
│
├── plans/                        # 设计文档
│   ├── 系统架构设计.md
│   ├── 技术选型说明.md
│   ├── 数据库设计文档.md
│   ├── API接口设计文档.md
│   ├── 项目目录结构规划.md
│   └── 开发环境配置说明.md
│
├── crawler/                      # 数据采集模块
│   ├── scrapy_crawler/            # Scrapy爬虫项目
│   │   ├── scrapy_crawler/
│   │   │   ├── spiders/          # 爬虫脚本
│   │   │   │   ├── __init__.py
│   │   │   │   ├── base_spider.py
│   │   │   │   ├── ecommerce_spider.py
│   │   │   │   ├── agriculture_spider.py
│   │   │   │   └── market_spider.py
│   │   │   ├── items.py          # 数据模型
│   │   │   ├── pipelines.py      # 数据管道
│   │   │   ├── middlewares.py    # 中间件
│   │   │   ├── settings.py       # 配置文件
│   │   │   └── utils.py          # 工具函数
│   │   ├── requirements.txt       # Python依赖
│   │   └── scrapy.cfg            # Scrapy配置
│   │
│   ├── data_cleaner/             # 数据清洗模块
│   │   ├── __init__.py
│   │   ├── cleaner.py            # 清洗逻辑
│   │   ├── validator.py          # 数据验证
│   │   └── normalizer.py         # 数据标准化
│   │
│   └── config/                   # 爬虫配置
│       ├── sources.yaml           # 数据源配置
│       ├── proxy.yaml            # 代理配置
│       └── user_agents.yaml      # User-Agent配置
│
├── hadoop/                       # Hadoop相关配置
│   ├── hdfs/                     # HDFS配置
│   │   ├── core-site.xml
│   │   ├── hdfs-site.xml
│   │   └── slaves
│   │
│   ├── hive/                     # Hive配置
│   │   ├── hive-site.xml
│   │   ├── hive-env.sh
│   │   └── scripts/              # Hive脚本
│   │       ├── init_tables.sql   # 初始化表
│   │       ├── etl_daily.sql     # 每日ETL
│   │       └── etl_monthly.sql   # 每月ETL
│   │
│   ├── spark/                    # Spark配置
│   │   ├── spark-defaults.conf
│   │   ├── spark-env.sh
│   │   └── jobs/                # Spark作业
│   │       ├── price_analysis.py
│   │       ├── prediction.py
│   │       └── alert_detection.py
│   │
│   ├── kafka/                    # Kafka配置
│   │   ├── server.properties
│   │   └── topics.yaml           # 主题配置
│   │
│   └── airflow/                  # Airflow配置
│       ├── airflow.cfg
│       └── dags/                 # DAG定义
│           ├── data_collection_dag.py
│           ├── data_processing_dag.py
│           └── prediction_dag.py
│
├── backend/                      # 后端服务
│   ├── spring-boot-api/          # Spring Boot项目
│   │   ├── src/
│   │   │   ├── main/
│   │   │   │   ├── java/com/agriculture/price/
│   │   │   │   │   ├── PriceApplication.java
│   │   │   │   │   ├── config/          # 配置类
│   │   │   │   │   │   ├── RedisConfig.java
│   │   │   │   │   │   ├── HiveConfig.java
│   │   │   │   │   │   └── HBaseConfig.java
│   │   │   │   │   ├── controller/      # 控制器
│   │   │   │   │   │   ├── AuthController.java
│   │   │   │   │   │   ├── PriceController.java
│   │   │   │   │   │   ├── ProductController.java
│   │   │   │   │   │   ├── MarketController.java
│   │   │   │   │   │   ├── AlertController.java
│   │   │   │   │   │   └── PredictController.java
│   │   │   │   │   ├── service/         # 服务层
│   │   │   │   │   │   ├── AuthService.java
│   │   │   │   │   │   ├── PriceService.java
│   │   │   │   │   │   ├── ProductService.java
│   │   │   │   │   │   ├── MarketService.java
│   │   │   │   │   │   ├── AlertService.java
│   │   │   │   │   │   └── PredictService.java
│   │   │   │   │   ├── mapper/          # MyBatis Mapper
│   │   │   │   │   │   ├── ProductMapper.java
│   │   │   │   │   │   ├── MarketMapper.java
│   │   │   │   │   │   ├── RegionMapper.java
│   │   │   │   │   │   └── UserMapper.java
│   │   │   │   │   ├── entity/          # 实体类
│   │   │   │   │   │   ├── Product.java
│   │   │   │   │   │   ├── Market.java
│   │   │   │   │   │   ├── Region.java
│   │   │   │   │   │   └── User.java
│   │   │   │   │   ├── dto/             # 数据传输对象
│   │   │   │   │   │   ├── PriceTrendDTO.java
│   │   │   │   │   │   ├── PriceCompareDTO.java
│   │   │   │   │   │   └── AlertDTO.java
│   │   │   │   │   ├── vo/              # 视图对象
│   │   │   │   │   │   ├── PriceTrendVO.java
│   │   │   │   │   │   └── AlertVO.java
│   │   │   │   │   ├── common/          # 公共类
│   │   │   │   │   │   ├── Result.java
│   │   │   │   │   │   ├── ResultCode.java
│   │   │   │   │   │   └── PageResult.java
│   │   │   │   │   └── util/            # 工具类
│   │   │   │   │       ├── DateUtil.java
│   │   │   │   │       ├── JwtUtil.java
│   │   │   │   │       └── HiveUtil.java
│   │   │   │   └── resources/
│   │   │   │       ├── application.yml
│   │   │   │       ├── application-dev.yml
│   │   │   │       ├── application-prod.yml
│   │   │   │       ├── mapper/          # MyBatis XML
│   │   │   │       │   ├── ProductMapper.xml
│   │   │   │       │   ├── MarketMapper.xml
│   │   │   │       │   ├── RegionMapper.xml
│   │   │   │       │   └── UserMapper.xml
│   │   │   │       └── logback.xml
│   │   │   └── test/
│   │   │       └── java/com/agriculture/price/
│   │   │           └── PriceApplicationTests.java
│   │   ├── pom.xml
│   │   Dockerfile
│   │   └── docker-compose.yml
│   │
│   └── mysql/                     # MySQL数据库
│       ├── init.sql               # 初始化脚本
│       └── data/                 # 数据文件
│
├── frontend/                     # 前端项目
│   ├── vue3-web/                 # Vue3项目
│   │   ├── public/
│   │   │   ├── index.html
│   │   │   └── favicon.ico
│   │   ├── src/
│   │   │   ├── main.js
│   │   │   ├── App.vue
│   │   │   ├── router/           # 路由配置
│   │   │   │   └── index.js
│   │   │   ├── store/            # Vuex状态管理
│   │   │   │   ├── index.js
│   │   │   │   └── modules/
│   │   │   │       ├── user.js
│   │   │   │       └── price.js
│   │   │   ├── api/              # API接口
│   │   │   │   ├── request.js
│   │   │   │   ├── auth.js
│   │   │   │   ├── price.js
│   │   │   │   ├── product.js
│   │   │   │   ├── market.js
│   │   │   │   ├── alert.js
│   │   │   │   └── predict.js
│   │   │   ├── views/            # 页面组件
│   │   │   │   ├── Login.vue
│   │   │   │   ├── Dashboard.vue
│   │   │   │   ├── PriceTrend.vue
│   │   │   │   ├── PriceCompare.vue
│   │   │   │   ├── MarketMap.vue
│   │   │   │   ├── AlertList.vue
│   │   │   │   ├── Prediction.vue
│   │   │   │   └── Report.vue
│   │   │   ├── components/       # 公共组件
│   │   │   │   ├── Header.vue
│   │   │   │   ├── Sidebar.vue
│   │   │   │   ├── PriceChart.vue
│   │   │   │   └── MarketHeatmap.vue
│   │   │   ├── utils/            # 工具函数
│   │   │   │   ├── date.js
│   │   │   │   └── format.js
│   │   │   └── assets/           # 静态资源
│   │   │       ├── styles/
│   │   │       │   └── main.css
│   │   │       └── images/
│   │   ├── package.json
│   │   ├── vite.config.js
│   │   └── Dockerfile
│   │
│   └── mobile/                   # 移动端（可选）
│       └── ...
│
├── models/                       # 机器学习模型
│   ├── training/                 # 模型训练
│   │   ├── prophet_model.py
│   │   ├── lstm_model.py
│   │   └── train.py
│   ├── saved/                    # 保存的模型
│   │   ├── prophet/
│   │   └── lstm/
│   └── evaluation/               # 模型评估
│       └── evaluate.py
│
├── scripts/                      # 脚本工具
│   ├── deploy.sh                 # 部署脚本
│   ├── start.sh                  # 启动脚本
│   ├── stop.sh                   # 停止脚本
│   └── backup.sh                 # 备份脚本
│
├── tests/                        # 测试
│   ├── unit/                     # 单元测试
│   ├── integration/              # 集成测试
│   └── performance/              # 性能测试
│
├── logs/                         # 日志目录
│   ├── crawler/
│   ├── backend/
│   └── hadoop/
│
├── data/                         # 数据目录
│   ├── raw/                      # 原始数据
│   ├── processed/                # 处理后数据
│   └── cache/                    # 缓存数据
│
├── .gitignore                    # Git忽略文件
├── README.md                     # 项目说明
└── docker-compose.yml            # Docker编排
```

---

## 2. 目录说明

### 2.1 doc/ - 项目文档
存放项目相关的文档，包括开题报告、技术指南等。

### 2.2 plans/ - 设计文档
存放系统设计相关的文档，包括架构设计、技术选型、数据库设计等。

### 2.3 crawler/ - 数据采集模块
- `scrapy_crawler/`：Scrapy爬虫项目，负责从各数据源抓取农产品价格数据
- `data_cleaner/`：数据清洗模块，对原始数据进行标准化和验证
- `config/`：爬虫配置文件，包括数据源、代理、User-Agent等

### 2.4 hadoop/ - Hadoop相关配置
- `hdfs/`：HDFS配置文件
- `hive/`：Hive配置和SQL脚本
- `spark/`：Spark配置和作业脚本
- `kafka/`：Kafka配置
- `airflow/`：Airflow DAG定义

### 2.5 backend/ - 后端服务
- `spring-boot-api/`：Spring Boot后端服务项目
- `mysql/`：MySQL数据库初始化脚本

### 2.6 frontend/ - 前端项目
- `vue3-web/`：Vue3前端项目
- `mobile/`：移动端项目（可选）

### 2.7 models/ - 机器学习模型
- `training/`：模型训练代码
- `saved/`：保存的模型文件
- `evaluation/`：模型评估代码

### 2.8 scripts/ - 脚本工具
存放部署、启动、停止、备份等脚本。

### 2.9 tests/ - 测试
存放单元测试、集成测试、性能测试代码。

### 2.10 logs/ - 日志目录
存放各模块的日志文件。

### 2.11 data/ - 数据目录
存放原始数据、处理后数据和缓存数据。

---

## 3. 关键文件说明

### 3.1 .gitignore
Git版本控制忽略文件配置。

### 3.2 README.md
项目说明文档，包含项目介绍、快速开始、开发指南等。

### 3.3 docker-compose.yml
Docker Compose编排文件，用于一键启动所有服务。

---

## 4. 开发环境目录结构

### 4.1 本地开发环境
```
hadoop-guizhou-agricultural-price-monitoring-system/
├── .env.local                   # 本地环境变量
├── .env.development             # 开发环境变量
└── .env.production              # 生产环境变量
```

### 4.2 配置文件优先级
1. 环境变量（.env文件）
2. 配置文件（application.yml）
3. 默认值

---

## 5. 数据目录规划

### 5.1 HDFS数据目录
```
/agriculture/
├── raw/                        # 原始数据
│   ├── ods_agri_price_raw/
│   └── ods_crawler_log/
├── detail/                     # 明细数据
│   ├── dwd_agri_price_detail/
│   └── dwd_price_change_detail/
├── summary/                    # 汇总数据
│   ├── dws_price_daily_summary/
│   ├── dws_price_monthly_summary/
│   └── dws_product_region_summary/
└── application/                # 应用数据
    ├── ads_price_trend_analysis/
    ├── ads_price_alert/
    ├── ads_price_prediction/
    └── ads_market_price_comparison/
```

### 5.2 HBase表命名
- `product_price`：产品价格实时表
- `market_summary`：市场汇总表
- `alert_info`：预警信息表

---

## 6. 日志目录规划

### 6.1 日志文件命名规范
```
logs/
├── crawler/
│   ├── scrapy_crawler_20260207.log
│   └── data_cleaner_20260207.log
├── backend/
│   ├── spring-boot-api_20260207.log
│   └── spring-boot-api_error_20260207.log
└── hadoop/
    ├── hive_20260207.log
    ├── spark_20260207.log
    └── airflow_20260207.log
```

### 6.2 日志级别
- DEBUG：调试信息
- INFO：一般信息
- WARN：警告信息
- ERROR：错误信息

---

## 7. 临时文件目录

### 7.1 临时文件位置
```
/tmp/agriculture/
├── crawler/                    # 爬虫临时文件
├── spark/                      # Spark临时文件
└── upload/                     # 上传文件临时目录
```

### 7.2 清理策略
- 每天清理超过7天的临时文件
- 定期清理Spark作业产生的临时文件
